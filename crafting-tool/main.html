<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title></title>
        <script src="scripts/require.js" data-main="scripts/crafting/crafting.js"></script>
        <link rel="stylesheet" type="text/css" href="css/main.css" />
        <link rel="stylesheet" type="text/css" href="css/estilos.css" />
    </head>
    <body ng-controller="MainCtrl">
        <div id="wrapper" ng-controller="CraftingToolCtrl" ng-show="screen == 'drawing_tool'">
            <div id="nav-bar">
                <div class="float-left">
                    <a href="#">< Volver a la home</a> |
                    <a href="#">Videos de Orientación</a>
                </div>
                <div class="float-right">
                    <a href="#" ng-click="gotoScreen('gallery')">GALERÍA</a> |
                    <a href="#" ng-click="gotoScreen('my_objects')">MIS OBJETOS</a> |
                    <a href="#" ng-click="gotoScreen('view_scene')">VER ESCENARIO</a>
                </div>
                <hr />
            </div>
            <!-- Drawing tool -->
            <div>
                <div id="sidebar-left">
                    <div id="newShapeSelector" ng-if="tool == 'select' || tool == 'rotate'"> 
                        <h3>01. Elegí la forma</h3>
                        <ul id="shape-selector">
                            <li ng-repeat="shape in shapes">
                                <a class="selected" href="#" onclick="return false;" ng-click="showCreateShape(shape);" ng-if=" new_shape_data.type == shape">
                                    <img src="assets/icons/{{ shape }}.png" />
                                </a>
                                <a href="#" onclick="return false;" ng-click="showCreateShape(shape);" ng-if=" new_shape_data.type != shape">
                                    <img src="assets/icons/{{ shape }}.png" />
                                </a>
                                <!--<button ng-click="showCreateShape(shape);">crear</button>-->
                            </li>
                        </ul>
                        <hr />
                    </div> <!-- newShapeSelector -->
                    <div id="shapesList" ng-if="tool == 'select' || tool == 'rotate'">
                        <h3>02. Completá los valores</h3>
                        <ul id="shapes-list">
                            <li>
                                <div ng-if="new_shape_data.type == 'circle'">
                                    <div class="image_wrapper">
                                        <img src="assets/icons/circle_selected.png" />
                                    </div>
                                    <div class="shape_parameters">
                                        <label>Radio</label>
                                        <div class="input-box">
                                            <input type="text" ng-model="new_shape_data.radius" />
                                            <span class="unit">u</span>
                                        </div>
                                    </div>
                                    <div class="shape_actions">
                                        <a href="#undef" ng-click="addCircle(new_shape_data.radius)">
                                            <img src="assets/icons/guardar.png" />
                                        </a>
                                    </div>
                                    <hr />
                                </div>
                                <div ng-if="new_shape_data.type == 'rectangle'">
                                    <div class="image_wrapper">
                                        <img src="assets/icons/rectangle_selected.png" />
                                    </div>
                                    <div class="shape_parameters">
                                        <label>Ancho</label>
                                        <input type="number" ng-model="new_shape_data.width" />
                                    </div>
                                    <div class="shape_parameters">
                                        <label>Alto</label>
                                        <input type="number" ng-model="new_shape_data.height" />
                                    </div>
                                    <div class="shape_actions">
                                        <a href="#undef" ng-click="addRectangle(new_shape_data.width, new_shape_data.height)">
                                            <img src="assets/icons/guardar.png" />
                                        </a>
                                    </div>
                                    <hr />
                                </div>
                                <div ng-if="new_shape_data.type == 'square'">
                                    <div class="image_wrapper">
                                        <img src="assets/icons/square_selected.png" />
                                    </div>
                                    <div class="shape_parameters">
                                        <label>Lado</label>
                                        <input type="number" ng-model="new_shape_data.side" />
                                    </div>
                                    <div class="shape_actions">
                                        <a href="#undef" ng-click="addSquare(new_shape_data.side)">
                                            <img src="assets/icons/guardar.png" />
                                        </a>
                                    </div>
                                    <hr />
                                </div>
                                <div ng-if="new_shape_data.type == 'rhombus'">
                                    <div class="image_wrapper">
                                        <img src="assets/icons/rhombus_selected.png" />
                                    </div>
                                    <div class="shape_parameters">
                                        <label>Lado</label>
                                        <input type="number" ng-model="new_shape_data.side" />
                                    </div>
                                    
                                    <div class="shape_actions">
                                        <a href="#undef" ng-click="addRhombus(new_shape_data.side)">
                                            <img src="assets/icons/guardar.png" />
                                        </a>
                                    </div>
                                    <hr />
                                </div>
                                <div ng-if="new_shape_data.type == 'trapezoid'">
                                    <div class="image_wrapper">
                                        <img src="assets/icons/trapezoid_selected.png" />
                                    </div>
                                    <div class="shape_parameters">
                                        <label>Base menor</label>
                                        <input type="number" ng-model="new_shape_data.base1" />
                                    </div>
                                    <div class="shape_parameters">
                                        <label>Base mayor</label>
                                        <input type="number" ng-model="new_shape_data.base2" />
                                    </div>
                                    <div class="shape_parameters">
                                        <label>Altura</label>
                                        <input type="number" ng-model="new_shape_data.height" />
                                    </div>
                                    <div class="shape_actions">
                                        <a href="#undef" ng-click="addTrapezoid(new_shape_data.base1, new_shape_data.base2, new_shape_data.height)">
                                            <img src="assets/icons/guardar.png" />
                                        </a>
                                    </div>
                                    <hr />
                                </div>
                                <div ng-if="new_shape_data.type == 'triangle'">
                                    <div class="image_wrapper">
                                        <img src="assets/icons/triangle_selected.png" />
                                    </div>
                                    <div class="shape_parameters">
                                        <label>Base</label>
                                        <input type="number" ng-model="new_shape_data.base" />
                                    </div>
                                    <div class="shape_parameters">
                                        <label>Altura</label>
                                        <input type="number" ng-model="new_shape_data.height" />
                                    </div>
                                    <div class="shape_parameters">
                                        <label>Ángulo</label>
                                        <input type="number" ng-model="new_shape_data.angle" />
                                    </div>
                                    <div class="shape_actions">
                                        <a href="#undef" ng-click="addTriangle(new_shape_data.base, new_shape_data.height, new_shape_data.angle)">
                                            <img src="assets/icons/guardar.png" />
                                        </a>
                                    </div>
                                    <hr />
                                </div>
                            </li>
                            <li ng-repeat="shape in drawing.shapes">
                                <div ng-if="shape.type == 'circle'">
                                    <div class="image_wrapper">
                                        <img src="assets/icons/{{ shape.type }}_selected.png" />
                                    </div>
                                    <div ng-if="edit_shape_data.index != $index">
                                        <div class="shape_parameters_disabled">
                                            <label>Radio</label>
                                            <div class="input-box">
                                                <input type="text" value="{{ shape.radius }}" disabled="disabled"/>
                                                <span class="unit">u</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div ng-if="edit_shape_data.index == $index">
                                        <div class="shape_parameters">
                                            <label>Radio</label>
                                            <div class="input-box">
                                                <input type="text" ng-model="edit_shape_data.radius"/>
                                                <span class="unit">u</span>
                                            </div>
                                        </div>
                                        <div class="shape_actions">
                                            <a href="#undef" ng-click="saveShapeChanges();">
                                                <img src="assets/icons/guardar.png" />
                                            </a>
                                            <a href="#undef" ng-click="editShape($index);">
                                                <img src="assets/icons/editar.png" />
                                            </a>
                                        </div>
                                    </div>
                                    <hr />
                                </div>
                                <div ng-if="shape.type == 'square'">
                                    <div class="image_wrapper">
                                        <img src="assets/icons/{{ shape.type }}_selected.png" />
                                    </div>
                                    <div ng-if="edit_shape_data.index != $index">
                                        <div class="shape_parameters_disabled">
                                            <label>Lado</label>
                                            <div class="input-box">
                                                <input type="text" value="{{ shape.side }}" disabled="disabled"/>
                                                <span class="unit">u</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div ng-if="edit_shape_data.index == $index">
                                        <div class="shape_parameters">
                                            <label>Lado</label>
                                            <input type="number" ng-model="edit_shape_data.side" />
                                        </div>
                                        <div class="shape_actions">
                                            <a href="#undef" ng-click="saveShapeChanges();">
                                                <img src="assets/icons/guardar.png" />
                                            </a>
                                            <a href="#undef" ng-click="editShape($index);">
                                                <img src="assets/icons/editar.png" />
                                            </a>
                                        </div>
                                    </div>
                                    <hr />
                                </div>
                                <div ng-if="shape.type == 'rhombus'">
                                    <div class="image_wrapper">
                                        <img src="assets/icons/{{ shape.type }}_selected.png" />
                                    </div>
                                    <div class="shape_parameters_disabled" ng-if="edit_shape_data.index != $index">
                                        <label>Lado</label>
                                        <input type="text" value="{{ shape.side }}" />
                                    </div>
                                    <div ng-if="edit_shape_data.index == $index">
                                        <div class="shape_parameters">
                                            <label>Lado</label>
                                            <input type="number" ng-model="edit_shape_data.side" />
                                        </div>
                                        <div class="shape_actions">
                                            <a href="#undef" ng-click="saveShapeChanges();">
                                                <img src="assets/icons/guardar.png" />
                                            </a>
                                            <a href="#undef" ng-click="editShape($index);">
                                                <img src="assets/icons/editar.png" />
                                            </a>
                                        </div>
                                    </div>
                                    <hr />
                                </div>
                                <div ng-if="shape.type == 'rectangle'">
                                    <div class="image_wrapper">
                                        <img src="assets/icons/{{ shape.type }}_selected.png" />
                                    </div>
                                    <div ng-if="edit_shape_data.index != $index">
                                        <div class="shape_parameters_disabled">
                                            <label>Ancho</label>
                                            <input type="input" value="{{shape.width}}" />
                                        </div>
                                        <div class="shape_parameters_disabled">
                                            <label>Alto</label>
                                            <input type="input" value="{{shape.height}}" />
                                        </div>
                                    </div>
                                    <div ng-if="edit_shape_data.index == $index">
                                        <div class="shape_parameters">
                                            <label>Ancho</label>
                                            <input type="number" ng-model="edit_shape_data.width" />
                                        </div>
                                        <div class="shape_parameters">
                                            <label>Alto</label>
                                            <input type="number" ng-model="edit_shape_data.height" />
                                        </div>
                                        <div class="shape_actions">
                                            <a href="#undef" ng-click="saveShapeChanges();">
                                                <img src="assets/icons/guardar.png" />
                                            </a>
                                            <a href="#undef" ng-click="editShape($index);">
                                                <img src="assets/icons/editar.png" />
                                            </a>
                                        </div>
                                    </div>
                                    <hr />
                                </div>
                                <div ng-if="shape.type == 'trapezoid'">
                                    <div class="image_wrapper">
                                        <img src="assets/icons/{{ shape.type }}_selected.png" />
                                    </div>
                                    <div ng-if="edit_shape_data.index != $index">
                                        <div class="shape_parameters_disabled">
                                            <label>Base Menor</label>
                                            <input type="input" value="{{shape.base1}}" />
                                        </div>
                                        <div class="shape_parameters_disabled">
                                            <label>Base Mayor</label>
                                            <input type="input" value="{{shape.base2}}" />
                                        </div>
                                        <div class="shape_parameters_disabled">
                                            <label>Altura</label>
                                            <input type="input" value="{{shape.height}}" />
                                        </div>
                                    </div>
                                    <div ng-if="edit_shape_data.index == $index">
                                        <div class="shape_parameters_disabled">
                                            <label>Base Menor</label>
                                            <input type="number" ng-model="edit_shape_data.base1" />
                                        </div>
                                        <div class="shape_parameters_disabled">
                                            <label>Base Mayor</label>
                                            <input type="number" ng-model="edit_shape_data.base2" />
                                        </div>
                                        <div class="shape_parameters_disabled">
                                            <label>Altura</label>
                                            <input type="number" ng-model="edit_shape_data.height" />
                                        </div>
                                        <div class="shape_actions">
                                            <a href="#undef" ng-click="saveShapeChanges();">
                                                <img src="assets/icons/guardar.png" />
                                            </a>
                                            <a href="#undef" ng-click="editShape($index);">
                                                <img src="assets/icons/editar.png" />
                                            </a>
                                        </div>
                                    </div>
                                    <hr />
                                </div>
                                <div ng-if="shape.type == 'triangle'">
                                    <div class="image_wrapper">
                                        <img src="assets/icons/{{ shape.type }}_selected.png" />
                                    </div>
                                    <div ng-if="edit_shape_data.index != $index">
                                        <div class="shape_parameters_disabled">
                                            <label>Base</label>
                                            <input type="input" value="{{shape.base}}" />
                                        </div>
                                        <div class="shape_parameters_disabled">
                                            <label>Altura</label>
                                            <input type="input" value="{{shape.height}}" />
                                        </div>
                                        <div class="shape_parameters_disabled">
                                            <label>Ángulo</label>
                                            <input type="input" value="{{shape.angle}}" />
                                        </div>
                                    </div>
                                    <div ng-if="edit_shape_data.index == $index">
                                        <div class="shape_parameters_disabled">
                                            <label>Base</label>
                                            <input type="number" ng-model="edit_shape_data.base" />
                                        </div>
                                        <div class="shape_parameters_disabled">
                                            <label>Altura</label>
                                            <input type="number" ng-model="edit_shape_data.height" />
                                        </div>
                                        <div class="shape_parameters_disabled">
                                            <label>Ángulo</label>
                                            <input type="number" ng-model="edit_shape_data.angle" />
                                        </div>
                                        <div class="shape_actions">
                                            <a href="#undef" ng-click="saveShapeChanges();">
                                                <img src="assets/icons/guardar.png" />
                                            </a>
                                            <a href="#undef" ng-click="editShape($index);">
                                                <img src="assets/icons/editar.png" />
                                            </a>
                                        </div>
                                    </div>
                                    <hr />
                                </div>
                            </li>
                        </ul>
                    </div> <!-- shapesList -->
                    <!-- Tool decorationSelector -->
                    <div id="decorationSelector" ng-if="tool == 'decorate'"> 
                        <div id="colorsList">
                            <h3>Colores</h3>
                            <ul>
                                <li ng-repeat="(decoration_id, decoration) in decoration_table" ng-if="decoration.type == 'color'">
                                    <a href="#undef" ng-click="setSelectedDecoration(decoration_id)"><span style="background-color:{{ decoration.fill }}"></span></a>
                                </li>
                            </ul>
                            <hr />
                        </div>
                        <div id="texturesList">
                            <h3>Texturas</h3>
                            <div id="textures-wrapper">
                                <ul>
                                    <li ng-repeat="(decoration_id, decoration) in decoration_table" ng-if="decoration.type == 'pattern'">
                                        <a href="#undef" ng-click="setSelectedDecoration(decoration_id)">
                                            <span style="background-image: url({{ decoration.fill.src }})"></span>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <div id="actions-buttons">
                            <a href="#undef" id="guardar-cambios" ng-click="saveDecoration()">
                                Guardar Cambios &nbsp;&nbsp;<img src="assets/icons/icono_guardar.png" />
                            </a>
                            <a href="#undef" id="cancelar" ng-click="setTool('select')">
                                Cancelar &nbsp;&nbsp;<img src="assets/icons/cruz_cancelar.png" />
                            </a>
                        </div>
                    </div> <!-- / Tool decorationSelector -->
                    <!-- Tool properties -->
                    <div id="properties" ng-if="tool == 'properties'">
                        Propiedades del objeto:
                        <input type="text" ng-model="properties_drawing_title" />
                        Nombre del objeto
                        {{ properties_selected_scene }}
                        Escenario Elegido
                        <a href="#">Compartir Objeto</a>
                        <a href="#">Descargar</a>
                        <button ng-click="setTool('select')">Cancelar</button>
                        <button ng-click="saveProperties(properties_drawing_title)">Guardar Cambios</button>
                        <button ng-click="setTool('select')">Cancelar</button>
                    </div> <!-- / Tool properies -->
                </div> <!-- sidebar-left -->
                <div id="app-content">
                    <div id="toolbar">
                        <ul>
                            <li>
                                <a href="#undef" ng-click="setTool('select');">
                                    <img src="assets/icons/seleccionar.png" />
                                </a>
                            </li>
                            <li>
                                <a href="#undef" ng-click="setTool('rotate');">
                                    <img src="assets/icons/deshacer.png" />
                                </a>
                            </li>
                            <li>
                                <a href="#undef" ng-click="setTool('decorate');">
                                    <img src="assets/icons/paleta_cromatica.png" />
                                </a>
                            </li>
                            <li>
                                <a href="#undef" ng-click="setTool('properties');">
                                    <img src="assets/icons/lista.png" />
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div id="drawingArea">
                        <canvas id="canvas" width="350" height="350"></canvas>
                        <a href="#undef" id="show-hide-bg" ng-click="showHideBackground();">
                            <img src="assets/icons/visualizar.png" />
                        </a>
                    </div>
                    <div id="tooltip-unidad-medida">
                    <img src="assets/icons/icono_unidaddemedida.png" />&nbsp;<b>Unidad de Medida<br /><br />
                    &nbsp;&nbsp;Área Máxima:</b><br />
                    &nbsp;&nbsp;26u.26u
                    </div>
                    <div id="tool-right-buttons">
                        <a href="#undef" id="boton-guardar" ng-click="saveDrawing()">
                            Guardar &nbsp;&nbsp;<img src="assets/icons/icono_guardar.png" />
                        </a>
                        <a href="#undef" id="boton-undo">
                            Deshacer &nbsp;&nbsp;<img src="assets/icons/deshacer.png" />
                        </a>
                        <a href="#undef" id="boton-insertar" ng-click="gotoScreen('select_scene');">
                            Insertar &nbsp;&nbsp;<img src="assets/icons/icono_insertar.png" />
                        </a>
                        <a href="#undef" id="boton-new" ng-click="createNew();">
                            Crear Nuevo 
                        </a>
                    </div>
                </div>
            </div> <!-- /Drawing tool -->
            <hr />
        </div> <!-- WRAPPER -->
        <!-- Scene Select -->
        <div id="wrapper_scene_select" ng-controller="SceneSelectCtrl" ng-show="screen == 'select_scene'">
            <div id="scene_select_step1" ng-show="step == 'select_scene'">
                <img src="{{selected_scene.background.src}}" />
                <div id="scene-navigation">
                    <p>Elegí el escenario<br />en cual querés intervenir<br /><span style="font-size: 24px">{{selected_scene.title}}</span></p>
                    <a id="arrow-prev" href="#undef" ng-click="prevScene();"><img src="assets/icons/flecha_izquierda.png" /></a>
                    <a id="manito" href="#undef" ng-click="selectScene();"><img src="assets/icons/boton_manito.png" /></a>
                    <a id="arrow-next" href="#undef" ng-click="nextScene();"><img src="assets/icons/flecha_derecha.png" /></a>
                </div>
            </div>
            <div id="scene_select_step2" ng-show="step == 'select_zone'">
                <p>Seleccioná el sector<br />donde querés posicionar tu objeto</p>
                <div id="positionObject">
                    <canvas id="positionObjectCanvas" width="960" height="192"></canvas>
                </div>
                <div id="scene2-buttons">
                    <a href="#undef" id="boton-guardar-cambios" ng-click="acceptZone()">
                        Seleccionar Zona &nbsp;&nbsp;<img src="assets/icons/icono_guardar.png" />
                    </a>
                    <a href="#undef" id="boton-cancelar" ng-click="gotoSceneSelect()">
                        Cancelar &nbsp;&nbsp;<img src="assets/icons/cruz_cancelar.png" />
                    </a>
                </div>
            </div>
        </div>
        <!-- /Scene Select -->
        <!-- Gallery -->
        <div id="wrapper" ng-controller="GalleryCtrl" ng-show="screen == 'gallery'">
            <div id="nav-bar">
                <div class="float-left">
                    <a href="#" ng-click="exitScreen()">&lt; Volver a la herramienta</a> |
                    <a href="#">Videos de Orientación</a>
                </div>
                <div class="float-right">
                    <a href="#">GALERÍA</a> |
                    <a href="#" ng-click="replaceScreen('my_objects')">MIS OBJETOS</a> |
                    <a href="#" ng-click="replaceScreen('view_scene')">VER ESCENARIO</a>
                </div>
                <hr />
            </div>
            <div id="gallery-content">
            Te presentamos algunas ideas inspiradoras y creativas para cada escenario
            <ul id="gallery-scene-selector">
                <li ng-repeat="scene in gallery_scenes">
                    <a href="#" ng-click="showGalleryForScene(scene.id)">{{scene.title}}</a>
                <li>
            </ul>
            {{current_index+1}} de {{total}}
            <a id="gallery-arrow-prev" href="#undef" ng-click="prev();"><img src="assets/gallery/atras.png" /></a>
            <img src="{{current.src}}" />
            <a id="gallery-arrow-next" href="#undef" ng-click="next();"><img src="assets/gallery/siguiente.png" /></a>
            {{ current.description }}
            </div>
        </div>
        <!-- /Gallery -->
        <!-- My Objects -->
        <div id="wrapper" ng-controller="MyObjectsCtrl" ng-show="screen == 'my_objects'">
            <div id="nav-bar">
                <div class="float-left">
                    <a href="#" ng-click="exitScreen()">&lt; Volver a la herramienta</a> |
                    <a href="#">Videos de Orientación</a>
                </div>
                <div class="float-right">
                    <a href="#" ng-click="replaceScreen('gallery')">GALERÍA</a> |
                    <a href="#">MIS OBJETOS</a> |
                    <a href="#" ng-click="replaceScreen('view_scene')">VER ESCENARIO</a>
                </div>
                <hr />
            </div>
            <div id="my_objects-content">
            Seleccioná el escenario y editá tus objetos
            <ul id="my_objects-scene-selector">
                <li ng-repeat="scene in scenes">
                    <a href="#" ng-click="showObjectsForScene(scene.id)">{{scene.title}}</a>
                <li>
            </ul>
            <a id="my_objects-arrow-prev" href="#undef" ng-click="prev();"><img src="assets/gallery/atras.png" /></a>
            <ul>
                <li ng-repeat="o in current_page_objects">
                    <img src="../app_dev.php/my_objects/{{o.id}}/image" />
                    {{ o.title }}
                    <a href="#" ng-click="loadDrawingById(o.id)">Cargar</a>
                </li>
            </ul>
            <a id="my_objects-arrow-next" href="#undef" ng-click="next();"><img src="assets/gallery/siguiente.png" /></a>
            </div>
        </div>
        <!-- /My Objects -->
        <!-- View Scene -->
        <div id="wrapper_view_scene" ng-controller="ViewSceneCtrl" ng-show="screen == 'view_scene'">
            <canvas id="view-scene-canvas" width="960" height="384"></canvas>
            <a href="#undef" id="view-scene-back" ng-click="exitScreen();">
                Volver
            </a>
            <a href="#undef" id="view-scene-zoom" ng-click="toggleZoom();">
                <img src="assets/icons/zoom_in.png" ng-show="!zoom_on" >
                <img src="assets/icons/zoom_out.png" ng-show="zoom_on" >
            </a>
        </div>
        <!-- /View Scene -->
    </body>
</html>

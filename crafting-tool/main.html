<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title></title>
        <script src="scripts/require.js" data-main="scripts/crafting/crafting.js"></script>
        <link rel="stylesheet" type="text/css" href="css/main.css" />
        <link rel="stylesheet" type="text/css" href="css/estilos.css" />
    </head>
    <body ng-controller="MainCtrl">
        <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/es_LA/sdk.js#xfbml=1&version=v2.3"; //&appId=382406031966259";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
        
        <div id="loading" ng-if="false">
            <img src="assets/logotipo_matematicon.png" />
            <br />
            Esperá mientras se termina de cargar la plataforma ...
        </div>
        <div id="main-container" style="display: none;">
        <div ng-show="screen == 'export'" style="text-align: center">
            <div style="text-align: center; color: #fff; text-decoration: bold; font-size: 16px;">
                Podés guardar la ficha de tu objeto haciendo click derecho y seleccionando "Guardar como" o "Guardar imagen como"
            </div>
            <canvas id="export_canvas" width="1050" height="700"></canvas>
            <a href="#undef" id="export-back" ng-click="exitScreen();" class="button">
                Volver
            </a>
        </div>
        <div id="wrapper" ng-controller="CraftingToolCtrl" ng-show="screen == 'drawing_tool'">
            <div id="nav-bar">
                <div ng-if="online" class="float-left">
                    <a href="../" onclick="confirm('¿Deseas volver a la home y cerrar la aplicación?') || event.preventDefault()">Volver a la home</a> |
                    <!--<a href="#">Videos de Orientación</a>-->
                </div>
                <div class="float-right">
                    <a href="#" ng-click="gotoScreen('gallery')">GALERÍA</a> |
                    <a href="#" ng-click="gotoScreen('my_objects')">MIS OBJETOS</a> |
                    <a href="#" ng-click="gotoScreen('view_scene')">VER ESCENARIO</a>
                </div>
                <hr />
            </div>
            <!-- Drawing tool -->
            <div>
                <div id="sidebar-left">
                    <div id="newShapeSelector" ng-if="tool == 'select' || tool == 'rotate'"> 
                        <h3>01. Elegí la figura</h3>
                        <ul id="shape-selector">
                            <li class="button" style="width: 15px;">
                                <a href="#" ng-click="newShapePagerPrev()"><img src="assets/icons/atras.png"></a>
                            </li>
                            <li ng-repeat="shape in shapes" ng-if="$index >= new_shape_pager_from && $index <= (new_shape_pager_from+ 6)">
                                <a class="selected" href="#" onclick="return false;" ng-click="showCreateShape(shape);" ng-if=" new_shape_data.type == shape">
                                    <img ng-src="assets/icons/{{ shape }}.png" />
                                </a>
                                <a href="#" onclick="return false;" ng-click="showCreateShape(shape);" ng-if=" new_shape_data.type != shape">
                                    <img ng-src="assets/icons/{{ shape }}.png" />
                                </a>
                                <!--<button ng-click="showCreateShape(shape);">crear</button>-->
                            </li>
                            <li class="button" style="width: 15px;">
                                <a href="#" ng-click="newShapePagerNext()"><img src="assets/icons/siguiente.png"></a>
                            </li>
                        </ul>
                        <hr />
                    </div> <!-- newShapeSelector -->
                    <div id="shapesList" ng-if="tool == 'select' || tool == 'rotate'">
                        <h3>02. Completá los valores</h3>
                        <ul id="shapes-list">
                            <li class="selected" ng-if="new_shape_data.type">
                                <div ng-if="new_shape_data.type == 'circle'">
                                    <div class="image_wrapper">
                                        <img src="assets/icons/circle_selected.png" />
                                    </div>
                                    <div class="shape_parameters">
                                        <label>Radio</label>
                                        <div class="input-box">
                                            <input type="text" ng-model="new_shape_data.radius" />
                                            <span class="unit">u</span>
                                        </div>
                                    </div>
                                    <div class="shape_actions">
                                        <a href="#undef" ng-click="addCircle(new_shape_data.radius)">
                                            <img src="assets/icons/guardar.png" />
                                        </a>
                                    </div>
                                    <div ng-if="new_shape_data.error" class="shape_error_message">
                                        El radio debe ser un número mayor a 0.
                                    </div>
                                    <hr />
                                </div>
                                <div ng-if="new_shape_data.type == 'polygon'">
                                    <div class="image_wrapper">
                                        <img src="assets/icons/polygon_selected.png" />
                                    </div>
                                    <div class="shape_parameters">
                                        <label>Núm. Lados</label>
                                        <div class="input-box">
                                            <input type="text" ng-model="new_shape_data.sides" />
                                        </div>
                                    </div>
                                    <div class="shape_parameters">
                                        <label>Lado</label>
                                        <div class="input-box">
                                            <input type="text" ng-model="new_shape_data.side" />
                                            <span class="unit">u</span>
                                        </div>
                                    </div>
                                    <div class="shape_actions">
                                        <a href="#undef" ng-click="addPolygon(new_shape_data.sides, new_shape_data.side)">
                                            <img src="assets/icons/guardar.png" />
                                        </a>
                                    </div>
                                    <div ng-if="new_shape_data.error" class="shape_error_message">
                                        El número de lados debe ser al menos 3 y cada lado debe ser mayor a 0.
                                    </div>
                                    <hr />
                                </div>
                                <div ng-if="new_shape_data.type == 'ellipse'">
                                    <div class="image_wrapper">
                                        <img src="assets/icons/ellipse_selected.png" />
                                    </div>
                                    <div class="shape_parameters">
                                        <label>Radio mayor</label>
                                        <div class="input-box">
                                            <input type="text" ng-model="new_shape_data.radius1" />
                                            <span class="unit">u</span>
                                        </div>
                                    </div>
                                    <div class="shape_parameters">
                                        <label>Radio menor</label>
                                        <div class="input-box">
                                            <input type="text" ng-model="new_shape_data.radius2" />
                                            <span class="unit">u</span>
                                        </div>
                                    </div>
                                    <div class="shape_actions">
                                        <a href="#undef" ng-click="addEllipse(new_shape_data.radius1, new_shape_data.radius2)">
                                            <img src="assets/icons/guardar.png" />
                                        </a>
                                    </div>
                                    <div ng-if="new_shape_data.error" class="shape_error_message">
                                        Los radios mayor y menor deben ser números mayores a 0, además el mayor debe ser mayor al menor.
                                    </div>
                                    <hr />
                                </div>
                                <div ng-if="new_shape_data.type == 'rectangle'">
                                    <div class="image_wrapper">
                                        <img src="assets/icons/rectangle_selected.png" />
                                    </div>
                                    <div class="shape_parameters">
                                        <label>Base</label>
                                        <div class="input-box">
                                            <input type="text" ng-model="new_shape_data.width" />
                                            <span class="unit">u</span>
                                        </div>
                                    </div>
                                    <div class="shape_parameters">
                                        <label>Altura</label>
                                        <div class="input-box">
                                            <input type="text" ng-model="new_shape_data.height" />
                                            <span class="unit">u</span>
                                        </div>
                                    </div>
                                    <div class="shape_actions">
                                        <a href="#undef" ng-click="addRectangle(new_shape_data.width, new_shape_data.height)">
                                            <img src="assets/icons/guardar.png" />
                                        </a>
                                    </div>
                                    <div ng-if="new_shape_data.error" class="shape_error_message">
                                        El ancho y alto deben ser números mayores a 0.
                                    </div>
                                    <hr />
                                </div>
                                <div ng-if="new_shape_data.type == 'square'">
                                    <div class="image_wrapper">
                                        <img src="assets/icons/square_selected.png" />
                                    </div>
                                    <div class="shape_parameters">
                                        <label>Lado</label>
                                        <div class="input-box">
                                            <input type="text" ng-model="new_shape_data.side" />
                                            <span class="unit">u</span>
                                        </div>
                                    </div>
                                    <div class="shape_actions">
                                        <a href="#undef" ng-click="addSquare(new_shape_data.side)">
                                            <img src="assets/icons/guardar.png" />
                                        </a>
                                    </div>
                                    <div ng-if="new_shape_data.error" class="shape_error_message">
                                        El lado debe ser un número mayor a 0.
                                    </div>
                                    <hr />
                                </div>
                                <div ng-if="new_shape_data.type == 'rhombus'">
                                    <div class="image_wrapper">
                                        <img src="assets/icons/rhombus_selected.png" />
                                    </div>
                                    <div class="shape_parameters">
                                        <label>Diagonal Mayor</label>
                                        <div class="input-box">
                                            <input type="text" ng-model="new_shape_data.diag1" />
                                            <span class="unit">u</span>
                                        </div>
                                    </div>
                                    <div class="shape_parameters">
                                        <label>Diagonal Menor</label>
                                        <div class="input-box">
                                            <input type="text" ng-model="new_shape_data.diag2" />
                                            <span class="unit">u</span>
                                        </div>
                                    </div>
                                    
                                    <div class="shape_actions">
                                        <a href="#undef" ng-click="addRhombus(new_shape_data.diag1, new_shape_data.diag2)">
                                            <img src="assets/icons/guardar.png" />
                                        </a>
                                    </div>
                                    <div ng-if="new_shape_data.error" class="shape_error_message">
                                        La diagonal mayor debe ser estrictamente mayor que la diagonal menor y ambas deben ser mayores a 0.
                                    </div>
                                    <hr />
                                </div>
                                <div ng-if="new_shape_data.type == 'trapezoid'">
                                    <div class="image_wrapper">
                                        <img src="assets/icons/trapezoid_selected.png" />
                                    </div>
                                    <div class="shape_parameters">
                                        <label>Base menor</label>
                                        <div class="input-box">
                                            <input type="text" ng-model="new_shape_data.base1" />
                                            <span class="unit">u</span>
                                        </div>
                                    </div>
                                    <div class="shape_parameters">
                                        <label>Base mayor</label>
                                        <div class="input-box">
                                            <input type="text" ng-model="new_shape_data.base2" />
                                            <span class="unit">u</span>
                                        </div>
                                    </div>
                                    <div class="shape_parameters">
                                        <label>Altura</label>
                                        <div class="input-box">
                                            <input type="text" ng-model="new_shape_data.height" />
                                            <span class="unit">u</span>
                                        </div>
                                    </div>
                                    <div class="shape_actions">
                                        <a href="#undef" ng-click="addTrapezoid(new_shape_data.base1, new_shape_data.base2, new_shape_data.height)">
                                            <img src="assets/icons/guardar.png" />
                                        </a>
                                    </div>
                                    <div ng-if="new_shape_data.error" class="shape_error_message">
                                        Los argumentos deben ser números mayores a 0 y la base mayor mayor a la base menor.
                                    </div>
                                    <hr />
                                </div>
                                <div ng-if="new_shape_data.type == 'triangle'">
                                    <div class="image_wrapper">
                                        <img src="assets/icons/triangle_selected.png" />
                                    </div>
                                    <div class="shape_parameters">
                                        <label>Base</label>
                                        <div class="input-box">
                                            <input type="text" ng-model="new_shape_data.base" />
                                            <span class="unit">u</span>
                                        </div>
                                    </div>
                                    <div class="shape_parameters">
                                        <label>Altura</label>
                                        <div class="input-box">
                                            <input type="text" ng-model="new_shape_data.height" />
                                            <span class="unit">u</span>
                                        </div>
                                    </div>
                                    <div class="shape_parameters">
                                        <label>Ángulo</label>
                                        <div class="input-box">
                                            <input type="text" ng-model="new_shape_data.angle" />
                                            <span class="unit">°</span>
                                        </div>
                                    </div>
                                    <div class="shape_actions">
                                        <a href="#undef" ng-click="addTriangle(new_shape_data.base, new_shape_data.height, new_shape_data.angle)">
                                            <img src="assets/icons/guardar.png" />
                                        </a>
                                    </div>
                                    <div ng-if="new_shape_data.error" class="shape_error_message">
                                        La base y altura deben ser números mayores a 0. Además el ángulo debe ser mayor a 0° y menor a 180°.
                                    </div>
                                    <hr />
                                </div>
                            </li>
                            <li ng-repeat="shape in drawing.shapes" ng-class="{selected: shape.index == edit_shape_data.index}" >
                                <div ng-if="shape.type == 'circle'">
                                    <div class="image_wrapper">
                                        <img ng-src="assets/icons/{{ shape.type }}_selected.png"/>
                                    </div>
                                    <div ng-if="edit_shape_data.index != shape.index">
                                        <div class="shape_parameters_disabled">
                                            <label>Radio</label>
                                            <div class="input-box">
                                                <input type="text" value="{{ shape.radius }}" disabled="disabled"/>
                                                <span class="unit">u</span>
                                            </div>
                                        </div>
                                        <div class="shape_actions">
                                            <a href="#undef" ng-click="setSelectedShape(shape);">
                                                <img src="assets/icons/editar.png" />
                                            </a>
                                        </div>
                                    </div>
                                    <div ng-if="edit_shape_data.index == shape.index">
                                        <div class="shape_parameters">
                                            <label>Radio</label>
                                            <div class="input-box">
                                                <input type="text" ng-model="edit_shape_data.radius"/>
                                                <span class="unit">u</span>
                                            </div>
                                        </div>
                                        <div class="shape_actions">
                                            <a href="#undef" ng-click="saveShapeChanges();">
                                                <img src="assets/icons/guardar.png" />
                                            </a>
                                        </div>
                                        <div class="shape_area_formula">
                                            área = &pi; x radio<sup>2</sup>
                                        </div>
                                    </div>
                                    <div ng-if="edit_shape_data.error && edit_shape_data.index == shape.index" class="shape_error_message">
                                        El radio debe ser un número mayor a 0.
                                    </div>
                                    <hr />
                                </div>
                                <div ng-if="shape.type == 'square'">
                                    <div class="image_wrapper">
                                        <img src="assets/icons/square_selected.png" />
                                    </div>
                                    <div ng-if="edit_shape_data.index != shape.index">
                                        <div class="shape_parameters_disabled">
                                            <label>Lado</label>
                                            <div class="input-box">
                                                <input type="text" value="{{ shape.side }}" disabled="disabled"/>
                                                <span class="unit">u</span>
                                            </div>
                                        </div>
                                        <div class="shape_actions">
                                            <a href="#undef" ng-click="setSelectedShape(shape);">
                                                <img src="assets/icons/editar.png" />
                                            </a>
                                        </div>
                                    </div>
                                    <div ng-if="edit_shape_data.index == shape.index">
                                        <div class="shape_parameters">
                                            <label>Lado</label>
                                            <div class="input-box">
                                                <input type="text" ng-model="edit_shape_data.side" />
                                                <span class="unit">u</span>
                                            </div>
                                        </div>
                                        <div class="shape_actions">
                                            <a href="#undef" ng-click="saveShapeChanges();">
                                                <img src="assets/icons/guardar.png" />
                                            </a>
                                        </div>
                                        <div class="shape_area_formula">
                                            área = lado x lado
                                        </div>
                                    </div>
                                    <div ng-if="edit_shape_data.error && edit_shape_data.index == shape.index" class="shape_error_message">
                                        El lado debe ser un número mayor a 0.
                                    </div>
                                    <hr />
                                </div>
                                <div ng-if="shape.type == 'rhombus'">
                                    <div class="image_wrapper">
                                        <img ng-src="assets/icons/{{ shape.type }}_selected.png" />
                                    </div>
                                    <div ng-if="edit_shape_data.index != shape.index">
                                        <div class="shape_parameters_disabled">
                                            <label>Diagonal Mayor</label>
                                            <div class="input-box">
                                                <input type="text" value="{{ shape.diag1 }}" disabled="disabled"/>
                                                <span class="unit">u</span>
                                            </div>
                                        </div>
                                        <div class="shape_parameters_disabled">
                                            <label>Diagonal Menor</label>
                                            <div class="input-box">
                                                <input type="text" value="{{ shape.diag2 }}" disabled="disabled"/>
                                                <span class="unit">u</span>
                                            </div>
                                        </div>
                                        <div class="shape_actions">
                                            <a href="#undef" ng-click="setSelectedShape(shape);">
                                                <img src="assets/icons/editar.png" />
                                            </a>
                                        </div>
                                    </div>
                                    <div ng-if="edit_shape_data.index == shape.index">
                                        <div class="shape_parameters">
                                            <label>Diagonal Mayor</label>
                                            <div class="input-box">
                                                <input type="text" ng-model="edit_shape_data.diag1"/>
                                                <span class="unit">u</span>
                                            </div>
                                        </div>
                                        <div class="shape_parameters">
                                            <label>Diagonal Menor</label>
                                            <div class="input-box">
                                                <input type="text" ng-model="edit_shape_data.diag2"/>
                                                <span class="unit">u</span>
                                            </div>
                                        </div>
                                        <div class="shape_actions">
                                            <a href="#undef" ng-click="saveShapeChanges();">
                                                <img src="assets/icons/guardar.png" />
                                            </a>
                                        </div>
                                        <div class="shape_area_formula">
                                            área = D x d / 2
                                        </div>
                                    </div>
                                    <div ng-if="edit_shape_data.error && edit_shape_data.index == shape.index" class="shape_error_message">
                                        La diagonal mayor debe ser estrictamente mayor que la diagonal menor y ambas deben ser mayores a 0.
                                    </div>
                                    <hr />
                                </div>
                                <div ng-if="shape.type == 'polygon'">
                                    <div class="image_wrapper">
                                        <img ng-src="assets/icons/{{ shape.type }}_selected.png" />
                                    </div>
                                    <div ng-if="edit_shape_data.index != shape.index">
                                        <div class="shape_parameters_disabled">
                                            <label>Núm. Lados</label>
                                            <div class="input-box">
                                                <input type="input" value="{{shape.sides}}" disabled="disabled" />
                                            </div>
                                        </div>
                                        <div class="shape_parameters_disabled">
                                            <label>Lado</label>
                                            <div class="input-box">
                                                <input type="input" value="{{shape.side}}" disabled="disabled" />
                                                <span class="unit">u</span>
                                            </div>
                                        </div>
                                        <div class="shape_actions">
                                            <a href="#undef" ng-click="setSelectedShape(shape);">
                                                <img src="assets/icons/editar.png" />
                                            </a>
                                        </div>
                                    </div>
                                    <div ng-if="edit_shape_data.index == shape.index">
                                        <div class="shape_parameters">
                                            <label>Núm. Lados</label>
                                            <div class="input-box">
                                                <input type="text" ng-model="edit_shape_data.sides" />
                                            </div>
                                        </div>
                                        <div class="shape_parameters">
                                            <label>Lado</label>
                                            <div class="input-box">
                                                <input type="text" ng-model="edit_shape_data.side" />
                                                <span class="unit">u</span>
                                            </div>
                                        </div>
                                        <div class="shape_actions">
                                            <a href="#undef" ng-click="saveShapeChanges();">
                                                <img src="assets/icons/guardar.png" />
                                            </a>
                                        </div>
                                        <div class="shape_area_formula">
                                            área = núm lados x lado x apotema / 2
                                        </div>
                                        <div class="shape_area_formula">
                                            apotema = lado / (2 * tan(180/núm lados)) &#8773; {{shape.side / (2. * Math.tan(Math.PI/shape.sides)) | number: 2}}
                                        </div>
                                    </div>
                                    <div ng-if="edit_shape_data.error && edit_shape_data.index == shape.index" class="shape_error_message">
                                        El número de lados debe ser al menos 3 y cada lado debe ser mayor a 0.
                                    </div>
                                    <hr />
                                </div>
                                <div ng-if="shape.type == 'ellipse'">
                                    <div class="image_wrapper">
                                        <img ng-src="assets/icons/{{ shape.type }}_selected.png" />
                                    </div>
                                    <div ng-if="edit_shape_data.index != shape.index">
                                        <div class="shape_parameters_disabled">
                                            <label>Radio mayor</label>
                                            <div class="input-box">
                                                <input type="input" value="{{shape.radius1}}" disabled="disabled" />
                                                <span class="unit">u</span>
                                            </div>
                                        </div>
                                        <div class="shape_parameters_disabled">
                                            <label>Radio menor</label>
                                            <div class="input-box">
                                                <input type="input" value="{{shape.radius2}}" disabled="disabled" />
                                                <span class="unit">u</span>
                                            </div>
                                        </div>
                                        <div class="shape_actions">
                                            <a href="#undef" ng-click="setSelectedShape(shape);">
                                                <img src="assets/icons/editar.png" />
                                            </a>
                                        </div>
                                    </div>
                                    <div ng-if="edit_shape_data.index == shape.index">
                                        <div class="shape_parameters">
                                            <label>Radio mayor</label>
                                            <div class="input-box">
                                                <input type="text" ng-model="edit_shape_data.radius1" />
                                                <span class="unit">u</span>
                                            </div>
                                        </div>
                                        <div class="shape_parameters">
                                            <label>Radio menor</label>
                                            <div class="input-box">
                                                <input type="text" ng-model="edit_shape_data.radius2" />
                                                <span class="unit">u</span>
                                            </div>
                                        </div>
                                        <div class="shape_actions">
                                            <a href="#undef" ng-click="saveShapeChanges();">
                                                <img src="assets/icons/guardar.png" />
                                            </a>
                                        </div>
                                        <div class="shape_area_formula">
                                            área = &pi; x radio mayor x radio menor
                                        </div>
                                    </div>
                                    <div ng-if="edit_shape_data.error && edit_shape_data.index == shape.index" class="shape_error_message">
                                        Los radios mayor y menor deben ser números mayores a 0, además el mayor debe ser mayor al menor.
                                    </div>
                                    <hr />
                                </div>
                                <div ng-if="shape.type == 'rectangle'">
                                    <div class="image_wrapper">
                                        <img ng-src="assets/icons/{{ shape.type }}_selected.png" />
                                    </div>
                                    <div ng-if="edit_shape_data.index != shape.index">
                                        <div class="shape_parameters_disabled">
                                            <label>Base</label>
                                            <div class="input-box">
                                                <input type="input" value="{{shape.width}}" disabled="disabled" />
                                                <span class="unit">u</span>
                                            </div>
                                        </div>
                                        <div class="shape_parameters_disabled">
                                            <label>Altura</label>
                                            <div class="input-box">
                                                <input type="input" value="{{shape.height}}" disabled="disabled" />
                                                <span class="unit">u</span>
                                            </div>
                                        </div>
                                        <div class="shape_actions">
                                            <a href="#undef" ng-click="setSelectedShape(shape);">
                                                <img src="assets/icons/editar.png" />
                                            </a>
                                        </div>
                                    </div>
                                    <div ng-if="edit_shape_data.index == shape.index">
                                        <div class="shape_parameters">
                                            <label>Base</label>
                                            <div class="input-box">
                                                <input type="text" ng-model="edit_shape_data.width" />
                                                <span class="unit">u</span>
                                            </div>
                                        </div>
                                        <div class="shape_parameters">
                                            <label>Altura</label>
                                            <div class="input-box">
                                                <input type="text" ng-model="edit_shape_data.height" />
                                                <span class="unit">u</span>
                                            </div>
                                        </div>
                                        <div class="shape_actions">
                                            <a href="#undef" ng-click="saveShapeChanges();">
                                                <img src="assets/icons/guardar.png" />
                                            </a>
                                        </div>
                                        <div class="shape_area_formula">
                                            área = base x altura
                                        </div>
                                    </div>
                                    <div ng-if="edit_shape_data.error && edit_shape_data.index == shape.index" class="shape_error_message">
                                        La base y la altura deben ser números mayores a 0.
                                    </div>
                                    <hr />
                                </div>
                                <div ng-if="shape.type == 'trapezoid'">
                                    <div class="image_wrapper">
                                        <img ng-src="assets/icons/{{ shape.type }}_selected.png" />
                                    </div>
                                    <div ng-if="edit_shape_data.index != shape.index">
                                        <div class="shape_parameters_disabled">
                                            <label>Base Menor</label>
                                            <div class="input-box">
                                                <input type="input" value="{{shape.base1}}" disabled="disabled" />
                                                <span class="unit">u</span>
                                            </div>
                                        </div>
                                        <div class="shape_parameters_disabled">
                                            <label>Base Mayor</label>
                                            <div class="input-box">
                                                <input type="input" value="{{shape.base2}}" disabled="disabled" />
                                                <span class="unit">u</span>
                                            </div>
                                        </div>
                                        <div class="shape_parameters_disabled">
                                            <label>Altura</label>
                                            <div class="input-box">
                                                <input type="input" value="{{shape.height}}" disabled="disabled" />
                                                <span class="unit">u</span>
                                            </div>
                                        </div>
                                        <div class="shape_actions">
                                            <a href="#undef" ng-click="setSelectedShape(shape);">
                                                <img src="assets/icons/editar.png" />
                                            </a>
                                        </div>
                                    </div>
                                    <div ng-if="edit_shape_data.index == shape.index">
                                        <div class="shape_parameters_disabled">
                                            <label>Base Menor</label>
                                            <div class="input-box">
                                                <input type="text" ng-model="edit_shape_data.base1" />
                                                <span class="unit">u</span>
                                            </div>
                                        </div>
                                        <div class="shape_parameters_disabled">
                                            <label>Base Mayor</label>
                                            <div class="input-box">
                                                <input type="text" ng-model="edit_shape_data.base2" />
                                                <span class="unit">u</span>
                                            </div>
                                        </div>
                                        <div class="shape_parameters_disabled">
                                            <label>Altura</label>
                                            <div class="input-box">
                                                <input type="text" ng-model="edit_shape_data.height" />
                                                <span class="unit">u</span>
                                            </div>
                                        </div>
                                        <div class="shape_actions">
                                            <a href="#undef" ng-click="saveShapeChanges();">
                                                <img src="assets/icons/guardar.png" />
                                            </a>
                                        </div>
                                        <div class="shape_area_formula">
                                            área = (base mayor + base menor) x altura / 2
                                        </div>
                                    </div>
                                    <div ng-if="edit_shape_data.error && edit_shape_data.index == shape.index" class="shape_error_message">
                                        Los argumentos deben ser números mayores a 0 y la base mayor mayor a la base menor.
                                    </div>
                                    <hr />
                                </div>
                                <div ng-if="shape.type == 'triangle'">
                                    <div class="image_wrapper">
                                        <img ng-src="assets/icons/{{ shape.type }}_selected.png" />
                                    </div>
                                    <div ng-if="edit_shape_data.index != shape.index">
                                        <div class="shape_parameters_disabled">
                                            <label>Base</label>
                                            <div class="input-box">
                                                <input type="input" value="{{shape.base}}" disabled="disabled" />
                                                <span class="unit">u</span>
                                            </div>
                                        </div>
                                        <div class="shape_parameters_disabled">
                                            <label>Altura</label>
                                            <div class="input-box">
                                                <input type="input" value="{{shape.height}}" disabled="disabled"/>
                                                <span class="unit">u</span>
                                            </div>
                                        </div>
                                        <div class="shape_parameters_disabled">
                                            <label>Ángulo</label>
                                            <div class="input-box">
                                                <input type="input" value="{{shape.angle}}" disabled="disabled"/>
                                                <span class="unit">°</span>
                                            </div>
                                        </div>
                                        <div class="shape_actions">
                                            <a href="#undef" ng-click="setSelectedShape(shape);">
                                                <img src="assets/icons/editar.png" />
                                            </a>
                                        </div>
                                    </div>
                                    <div ng-if="edit_shape_data.index == shape.index">
                                        <div class="shape_parameters_disabled">
                                            <label>Base</label>
                                            <div class="input-box">
                                                <input type="text" ng-model="edit_shape_data.base" />
                                                <span class="unit">u</span>
                                            </div>
                                        </div>
                                        <div class="shape_parameters_disabled">
                                            <label>Altura</label>
                                            <div class="input-box">
                                                <input type="text" ng-model="edit_shape_data.height" />
                                                <span class="unit">u</span>
                                            </div>
                                        </div>
                                        <div class="shape_parameters_disabled">
                                            <label>Ángulo</label>
                                            <div class="input-box">
                                                <input type="text" ng-model="edit_shape_data.angle" />
                                                <span class="unit">°</span>
                                            </div>
                                        </div>
                                        <div class="shape_actions">
                                            <a href="#undef" ng-click="saveShapeChanges();">
                                                <img src="assets/icons/guardar.png" />
                                            </a>
                                        </div>
                                        <div class="shape_area_formula">
                                            área = base x altura / 2
                                        </div>
                                    </div>
                                    <div ng-if="edit_shape_data.error && edit_shape_data.index == shape.index" class="shape_error_message">
                                        La base y altura deben ser números mayores a 0. Además el ángulo debe ser mayor a 0° y menor a 180°.
                                    </div>
                                    <hr />
                                </div>
                            </li>
                        </ul>
                    </div> <!-- shapesList -->
                    <!-- Tool decorationSelector -->
                    <div id="decorationSelector" ng-if="tool == 'decorate'"> 
                        <div id="colorsList">
                            <h3>Colores</h3>
                            <ul>
                                <li ng-repeat="(decoration_id, decoration) in decoration_table" ng-if="decoration.type == 'color'">
                                    <a href="#undef" ng-click="setSelectedDecoration(decoration_id)"><span ng-style="{'background':  decoration.fill}"></span></a>
                                </li>
                            </ul>
                            <hr />
                        </div>
                        <div id="texturesList">
                            <h3>Texturas</h3>
                            <div id="textures-wrapper">
                                <ul>
                                    <li ng-repeat="(decoration_id, decoration) in decoration_table" ng-if="decoration.type == 'pattern'">
                                        <a href="#undef" ng-click="setSelectedDecoration(decoration_id)">
                                            <span ng-style="{'background-image': 'url('+decoration.fill.src+')' }"></span>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <div id="actions-buttons">
                            <a href="#undef" id="guardar-cambios" ng-click="saveDecoration()">
                                Guardar Cambios &nbsp;&nbsp;<img src="assets/icons/icono_guardar.png" />
                            </a>
                            <a href="#undef" id="cancelar" ng-click="cancelDecoration()">
                                Cancelar &nbsp;&nbsp;<img src="assets/icons/cruz_cancelar.png" />
                            </a>
                        </div>
                    </div> <!-- / Tool decorationSelector -->
                    <!-- Tool properties -->
                    <div ng-if="tool == 'properties'" id="properties_wrapper">
                        <div id="properties_msg">
                            <img src="assets/icons/atencion.png" style="float: left; padding: 10px;" />
                            <div style="display: block">
                                <b>Debes asignarle un nombre a tu objeto.</b><br />
                                    Recuerda insertarlo en el escenario cuando hayas finalizado la edición.
                            </div>
                        </div>
                        <div id="properties">
                            <h3>Propiedades del objeto</h3><br /><br />
                            <input type="text" ng-model="properties_drawing_title" style="width: 150px; border: none; color: #80715C;" />
                            <div class="properties_error_message" ng-if="properties_title_error">Ingresa un nombre para tu objeto</div>
                            <br />
                            <div style="display:block; width: 150px; background-color: #80715C; height:1px"></div>
                            <label>Nombre del objeto</label><br /><br />
                            <div style="float: left; width: 160px;">{{ properties_selected_scene }}</div>
                            <a href="#undef" id="boton-cambiar-escenario" ng-click="propertiesEditScene()"></a>
                            <br />
                            <div style="clear: both; display:block; width: 150px; background-color: #80715C; height:1px"></div>
                            <label>Escenario Elegido</label><br /><br />
                            <!--<a href="#">Compartir Objeto</a>
                            <a href="#">Descargar</a>-->
                            <div id="actions-buttons">
                                <a href="#undef" id="guardar-cambios" ng-click="saveProperties(properties_drawing_title)">
                                    Guardar Cambios &nbsp;&nbsp;<img src="assets/icons/icono_guardar.png" />
                                </a>
                                <a href="#undef" id="cancelar" ng-click="setTool('select')">
                                    Cancelar &nbsp;&nbsp;<img src="assets/icons/cruz_cancelar.png" />
                                </a>
                            </div>
                        </div>
                    </div> <!-- / Tool properies -->
                </div> <!-- sidebar-left -->
                <div id="app-content">
                    <div id="toolbar">
                        <ul>
                            <li ng-class="{selected: tool == 'select'}">
                                <a href="#undef" ng-click="setTool('select');" ng-class="{selected: tool == 'select'}" title="Seleccionar / Mover">
                                    <img src="assets/icons/seleccionar.png" />
                                </a>
                            </li>
                            <li ng-class="{selected: tool == 'rotate'}">
                                <a href="#undef" ng-click="setTool('rotate');" ng-class="{selected: tool == 'rotate'}" title="Rotar">
                                    <img src="assets/icons/rotar.png" />
                                </a>
                            </li>
                            <li ng-class="{selected: tool == 'decorate'}">
                                <a href="#undef" ng-click="setTool('decorate');" ng-class="{selected: tool == 'decorate'}" title="Decorar">
                                    <img src="assets/icons/paleta_cromatica.png" />
                                </a>
                            </li>
                            <li ng-class="{selected: tool == 'properties'}">
                                <a href="#undef" ng-click="setTool('properties');" ng-class="{selected: tool == 'properties'}" title="Propiedades">
                                    <img src="assets/icons/lista.png" />
                                </a>
                            </li>
                            <li>
                                <a href="#undef" ng-click="exportImage(this);" title="Ver ficha del objeto">
                                    <img src="assets/icons/descargar.png" />
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div id="drawingArea">
                        <canvas id="canvas" width="350" height="350" ng-class="tool" oncontextmenu="return false;"></canvas>
                        <div id="contextMenu" class="contextMenu">
                            <ul>
                                <li>
                                    <a href="#undef" ng-click="contextSendToBack()">Enviar atras</a>
                                </li>
                                <li>
                                    <a href="#undef" ng-click="contextBringToFront()">Traer adelante</a>
                                </li>
                                <li>
                                    <a href="#undef" ng-click="contextDelete()">Borrar</a>
                                </li>
                                <li>
                                    <a href="#undef" ng-click="contextClone()">Clonar</a>
                                </li>
                            </ul>
                        </div>
                        <a href="#undef" id="show-hide-bg" ng-click="showHideBackground();" title="Mostrar / ocultar fondo">
                            <img src="assets/icons/visualizar.png" />
                        </a>
                        <div style="text-align: center; color: #222; text-decoration: bold; font-size: 10px;">Hace click derecho sobre una figura para acceder a más acciones</div>
                    </div>
                    <div class="status">
                        {{status_text}}
                    </div>
                    <div id="tooltip-unidad-medida">
                    <img src="assets/icons/icono_unidaddemedida.png" />&nbsp;<b>Unidad de Medida<br /><br />
                    &nbsp;&nbsp;Área Máxima:</b><br />
                    &nbsp;&nbsp;26u.26u
                    </div>
                    <div id="tool-right-buttons">
                        <a href="#undef" id="boton-guardar" ng-click="saveDrawing()">
                            Guardar &nbsp;&nbsp;<img src="assets/icons/icono_guardar.png" />
                        </a>
                        <a href="#undef" id="boton-undo" ng-click="undo()">
                            Deshacer &nbsp;&nbsp;
                            <img ng-if="undo_stack.length == 0" src="assets/icons/deshacer.png" />
                            <img ng-if="undo_stack.length > 0" src="assets/icons/deshacer_activo.png" />
                        </a>
                        <a href="#undef" id="boton-insertar" ng-click="insertDrawing();">
                            Insertar &nbsp;&nbsp;<img src="assets/icons/icono_insertar.png" />
                        </a>
                        <a href="#undef" id="boton-new" ng-click="createNew();">
                            Crear Nuevo 
                        </a>
            <!--<input id="file" onchange="angular.element(this).scope().importFile(event)" type="file" />
            <a href="#undef" ng-click="importFile();">Importar</a>-->
                        <div id="share-on-fb" style="margin-top: 5px; margin-left: 20px;" class="fb-share-button" data-href="http://matematicon.educ.ar" data-layout="button"></div>
                    </div>
                </div>
            </div> <!-- /Drawing tool -->
            <hr />
        </div> <!-- WRAPPER -->
        <!-- Scene Select -->
        <div id="wrapper_scene_select" ng-controller="SceneSelectCtrl" ng-show="screen == 'select_scene'">
            <div id="scene_select_step1" ng-show="step == 'select_scene'">
                <img ng-src="{{selected_scene.background}}" />
                <div id="scene-navigation">
                    <p>Elegí el escenario<br />en cual querés intervenir<br /><span style="font-size: 24px">{{selected_scene.title}}</span></p>
                    <a id="arrow-prev" href="#undef" ng-click="prevScene();"><img src="assets/icons/flecha_izquierda.png" /></a>
                    <a id="manito" href="#undef" ng-click="selectScene();"><img src="assets/icons/boton_manito.png" /></a>
                    <a id="arrow-next" href="#undef" ng-click="nextScene();"><img src="assets/icons/flecha_derecha.png" /></a>
                </div>
            </div>
            <div id="scene_select_step2" ng-show="step == 'select_zone'">
                <p>Seleccioná el sector<br />donde querés posicionar tu objeto</p>
                <div id="positionObject">
                    <canvas id="positionObjectCanvas" width="960" height="192"></canvas>
                </div>
                <div id="scene2-buttons">
                    <a href="#undef" id="boton-guardar-cambios" ng-click="acceptZone()">
                        Seleccionar Sector &nbsp;&nbsp;<img src="assets/icons/icono_guardar.png" />
                    </a>
                    <a href="#undef" id="boton-cancelar" ng-click="gotoSceneSelect()">
                        Cancelar &nbsp;&nbsp;<img src="assets/icons/cruz_cancelar.png" />
                    </a>
                </div>
            </div>
        </div>
        <!-- /Scene Select -->
        <!-- Gallery -->
        <div id="wrapper" ng-controller="GalleryCtrl" ng-show="screen == 'gallery'">
            <div id="nav-bar">
                <div class="float-left">
                    <a href="#" ng-click="exitScreen()">&lt; Volver a la herramienta</a> |
                    <!--<a href="#">Videos de Orientación</a>-->
                </div>
                <div class="float-right">
                    <a href="#">GALERÍA</a> |
                    <a href="#" ng-click="replaceScreen('my_objects')">MIS OBJETOS</a> |
                    <a href="#" ng-click="replaceScreen('view_scene')">VER ESCENARIO</a>
                </div>
                <hr />
            </div>
            <div id="gallery-content">
                <h3>Te presentamos algunas ideas inspiradoras y creativas para cada escenario</h3>
                <ul id="gallery-scene-selector">
                    <li ng-repeat="scene in gallery_scenes">
                        <a href="#" ng-click="showGalleryForScene(scene.id)" class="selected" ng-if="current_scene_id == scene.id"><span ng-if="$index != 0">|</span> {{scene.title}}&nbsp;&nbsp;</a>
                        <a href="#" ng-click="showGalleryForScene(scene.id)" ng-if="current_scene_id != scene.id"><span ng-if="$index != 0">|</span> {{scene.title}}&nbsp;&nbsp;</a>
                    <li>
                </ul>
                <div style="clear: both;float:left; margin-top: 100px; margin-left: 220px;">{{current_index+1}} de {{total}}</div>
                <div style="float:left; margin-top: 115px; margin-left: 10px;"><a id="gallery-arrow-prev" href="#undef" ng-click="prev();"><img src="assets/gallery/atras.png" /></a></div>
                <div style="float:left;"><img ng-src="{{current.src}}" /></div>
                <div style="float:left; margin-top: 115px; margin-left: 10px;"><a id="gallery-arrow-next" href="#undef" ng-click="next();"><img src="assets/gallery/siguiente.png" /></a></div>
                <div style="float:left; margin-top: 100px; margin-left:20px;">{{ current.description }}</div>
            </div>
        </div>
        <!-- /Gallery -->
        <!-- My Objects -->
        <div id="wrapper" ng-controller="MyObjectsCtrl" ng-show="screen == 'my_objects'">
            <div id="nav-bar">
                <div class="float-left">
                    <a href="#" ng-click="exitScreen()">&lt; Volver a la herramienta</a> |
                    <!--<a href="#">Videos de Orientación</a>-->
                </div>
                <div class="float-right">
                    <a href="#" ng-click="replaceScreen('gallery')">GALERÍA</a> |
                    <a href="#">MIS OBJETOS</a> |
                    <a href="#" ng-click="replaceScreen('view_scene')">VER ESCENARIO</a>
                </div>
                <hr />
            </div>
            <div id="my_objects-content">
            <h3>Seleccioná el escenario y editá tus objetos</h3>
            <ul id="my_objects-scene-selector">
                <li ng-repeat="scene in scenes">
                        <a href="#" ng-click="showObjectsForScene(scene.id)" class="selected" ng-if="current_scene_id == scene.id"><span ng-if="$index != 0">|</span> {{scene.title}}&nbsp;&nbsp;</a>
                        <a href="#" ng-click="showObjectsForScene(scene.id)" ng-if="current_scene_id != scene.id"><span ng-if="$index != 0">|</span> {{scene.title}}&nbsp;&nbsp;</a>
                <li>
            </ul>
            <a id="my_objects-arrow-prev" href="#undef" ng-click="prev();"><img src="assets/gallery/atras.png" /></a>
            <ul id="objects_page">
                <li ng-repeat="o in current_page_objects">
                    <img ng-if="online" ng-src="../my_objects/{{o.id}}/image" width="70%" height="70%"/>
                    <img ng-if="offline" ng-src="{{ o.thumb }}" width="70%" height="70%"/>
                    <br />{{ o.title }}
                    <br />
                    <a href="#" title="Editar" class="boton-editar-objeto" ng-click="loadDrawingById(o.id)"><img src="assets/icons/editar_objeto.png" /></a>
                    <a href="#" title="Eliminar" ng-click="deleteDrawingById(o.id)" class="button"><img src="assets/icons/eliminar.png" /></a>
                    <a href="#" title="Exportar" ng-click="exportDrawing(o.id)" class="button"><img src="assets/icons/exportar.png" /></a>
                </li>
            </ul>
            <div ng-if="current_page_objects.length == 0" style="width:760px; float: left">&nbsp;</div>
                <a id="my_objects-arrow-next" href="#undef" ng-click="next();"><img src="assets/gallery/siguiente.png" /></a>
            </div>
            <div style="text-align: center; margin-top:-40px;">
                <a id="boton-importar" ng-click="importFromFile();" href="#undef">Abrir desde archivo</a>
            </div>
            <input ng-if="offline" id="export_file" type="file" nwsaveas style="display:none" nwworkingdir=""/>
            <input ng-if="offline" id="import_file" type="file" style="display:none" nwworkingdir=""/>
            <input ng-if="online" id="import_file" type="file" style="display:none" />
        </div>
        <!-- /My Objects -->
        <!-- View Scene -->
        <div id="wrapper_view_scene" ng-controller="ViewSceneCtrl" ng-show="screen == 'view_scene'">
            <canvas id="view-scene-canvas" width="960" height="384" style="pointer: hand"></canvas>
            <div id="view-scene-arrow-back">
                <img src="assets/icons/flecha_izquierda.png" />
            </div>
            <div id="view-scene-arrow-next">
                <img src="assets/icons/flecha_derecha.png" />
            </div>
            <a href="#undef" id="view-scene-back" ng-click="exitScreen();" class="button">
                Volver
            </a>
            <a href="#undef" id="view-scene-zoom" ng-click="toggleZoom();" class="button">
                <img src="assets/icons/zoom_in.png" ng-show="!zoom_on" >
                <img src="assets/icons/zoom_out.png" ng-show="zoom_on" >
            </a>
            <div style="text-align: center; color: #fff; text-decoration: bold; font-size: 10px;">
                Si no encontrás tu objeto podés desplazarte arrastrando la imagen para verlo
            </div>
        </div>
        <!-- /View Scene -->
        <!-- View City -->
        <div id="wrapper_view_city" ng-controller="ViewCityCtrl" ng-show="screen == 'view_city'">
            <canvas id="view-city-canvas" width="960" height="384" style="pointer: hand"></canvas>
            <div id="view-city-bubble"></div>
            <a href="#undef" id="view-city-back" ng-click="exitScreen();" class="button">
                Volver
            </a>
            <div style="text-align: center; color: #fff; text-decoration: bold; font-size: 10px;">
                Si no encontrás tu objeto podés desplazarte arrastrando la imagen para verlo
            </div>
        </div>
        <!-- /View City -->
    </div>
    </body>
</html>
